---
import Search from './Search.astro';
---

<nav class="navbar">
  <div class="nav__buttons">
    <button class="menu__button">
      <svg
        class="menu__icon"
        fill="#000000"
        width="800px"
        height="800px"
        viewBox="0 0 512 512"
        xmlns="http://www.w3.org/2000/svg"
        ><title>ionicons-v5-j</title><path
          d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"></path></svg
      >
    </button>
    <button class="search__button">
      <svg
        class="search__icon"
        fill="#000000"
        width="800px"
        height="800px"
        viewBox="0 0 512 512"
        xmlns="http://www.w3.org/2000/svg"
        ><title>ionicons-v5-f</title><path
          d="M464,428,339.92,303.9a160.48,160.48,0,0,0,30.72-94.58C370.64,120.37,298.27,48,209.32,48S48,120.37,48,209.32s72.37,161.32,161.32,161.32a160.48,160.48,0,0,0,94.58-30.72L428,464ZM209.32,319.69A110.38,110.38,0,1,1,319.69,209.32,110.5,110.5,0,0,1,209.32,319.69Z"
        ></path></svg
      >
    </button>
  </div>

  <div class="gcse-search"></div>
  <menu class="dropdown__menu">
    <li class="navbar__item"><a href="/">Home</a></li>
    <li class="navbar__item"><a href="/shows">Shows</a></li>
    <li class="navbar__item"><a href="# ">About</a></li>
  </menu>
  <Search />
</nav>
<style>
  .navbar {
    width: 100%;
  }
  .nav__buttons {
    position: absolute;
    top: var(--xx-sm);
    right: 0;
  }
  .dropdown__menu {
    display: none;
    width: 100%;
    padding: 0 var(--sm);
    background-color: var(--grey);
    flex-direction: column;
    align-items: start;
    list-style: none;
    gap: var(--xx-sm);
    animation: scaleDown .25s ease-in-out forwards;
    transform-origin: top center;
  }
  .dropdown__menu__active {
    display: flex;
    transform: translateY(0);
  }
  .navbar__item a {
    font-size: var(--med);
    font-weight: 700;
    text-decoration: none;
    color: black;
  }
  button {
    height: 40px;
    width: 40px;
  }
  .search__button {
    padding: 2px 4px;
  }
  .menu__button {
  }
  @media (min-width: 410px) {
    button {
      top: 12px;
    }
  }
  svg {
    height: 100%;
  }
  @keyframes scaleDown {
    0% {
      transform: scaleY(0);
    }

    80% {
      transform: scaleY(1.1);
    }

    100% {
      transform: scaleY(1);
    }
  }
</style>
<script>
  const menuButton = document.querySelector('.menu__button');
  const menuList = document.querySelector('.dropdown__menu');

  menuButton.addEventListener('click', (e) => handleMenuClick(e));

  function handleMenuClick(e) {
    e.preventDefault();
    if (menuList.classList.contains('dropdown__menu__active')) {
      menuList.classList.remove('dropdown__menu__active');
      menuList.style.transform = 'translateY(-100%)';
    } else {
      menuList.classList.add('dropdown__menu__active');
      menuList.style.transform = 'translateY(0)';
    }
  }
  const searchButton = document.querySelector('.search__button');
  const searchContainer = document.querySelector('.search__container');
  const searchInput = document.querySelector('.search__input');

  searchButton.addEventListener('click', (e) => handlesearchClick(e));

  function handlesearchClick(e) {
    e.preventDefault();
    if (searchContainer.classList.contains('search__container__active')) {
      searchContainer.classList.remove('search__container__active');
    } else {
      searchContainer.classList.add('search__container__active');
      (searchInput as HTMLElement).focus();
    }
  }
</script>
